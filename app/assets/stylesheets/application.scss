// govuk_frontend_toolkit helpers
@import "typography";
@import "measurements";
@import "colours";
@import "shims";
@import "css3";
@import "grid_layout";

@import "reset";
@import "govspeak";

.outer-block {
  @include outer-block;
}

.inner-block {
  @include inner-block;
}

#manuals-frontend {
  padding-bottom:$gutter*3;

  header {
    background: $govuk-blue;
    &.hmrc {
      background: $hm-revenue-customs;
    }
    padding: $gutter;
    color: white;
    margin: 0 (-$gutter);
    @include core-16;
    @extend %contain-floats;

    @include media(tablet){
      margin: 0;

      .primary, .secondary {
        float: left;
      }
      .primary {
        width: $two-thirds;
      }
      .secondary {
        width: $one-third;

        .secondary-inner {
          padding-left: $gutter;
        }
      }
    }

    .manual-type {
      @include heading-24;
    }

    h1 {
      @include core-36;
      font-weight:bold;
      padding: 0 0 $gutter-half 0;

      @include media(tablet){
        padding: 0 0 $gutter 0;
      }
    }

    a {
      color: white;
    }

    time {
      @include bold-19;
      display: block;
    }

    dl {
      margin-bottom: $gutter-half;

      @include media(tablet){
        margin-bottom: $gutter;
      }
    }

    dt {
      float: left;
      clear: left;
      width: auto;
      min-width: 100px;

      @include media(tablet){
        min-width: 120px;
      }

      &:after {
        content: ':';
      }
    }
  }

  .breadcrumb-trail {
    margin:10px 0 0 0;
    padding:0 0;
    border-bottom: 1px solid $border-colour;
    @extend %contain-floats;

    strong {
      font-weight:bold;
    }

    li {
      @include core-16;
      background-image: image-url("separator.png");
      background-position: 100% 10%;
      background-repeat: no-repeat;
      float: left;
      list-style: none;
      margin-left: 5px;
      margin-right: 5px;
      padding: 0 20px 10px 0;

      @include media(tablet){
        background-position: 100% 28%;
      }

      @include device-pixel-ratio() {
        background-image: image-url("separator-2x.png");
        background-size: 6px 11px;
      }
      &:first-child {
        margin-left:0;
      }
      &.last-child {
        background-image:none;
        color: $secondary-text-colour;
      }
    }
  }

  .manual-section {
    margin-top: $gutter-half;

    @include media(tablet){
      margin-top: $gutter;
    }

    .section-content {
      margin-top: $gutter-half;
       @include media(tablet){
         margin-top: $gutter;
       }
    }
  }

  .collapsible-subsections h2 {
    @include core-19;
    font-weight:bold;
    border-top: 1px solid $border-colour;
    padding: $gutter-one-third $gutter $gutter-one-third 0;
    margin: $gutter 0;
    text-decoration: none;
    display: block;
    position: relative;

    /* linked-titles are stacked tighter */
    &.linked-title {
      margin: 0;
      cursor: pointer;
      &:hover {
        background-color:$grey-4;
      }
    }

    .subsection-id {
      color: $secondary-text-colour;
      float:left;
      font-weight:normal;
    }

    &.subsection-with-id .subsection-title-text {
      margin-left: 100px;
      display:block;
      @include media(tablet) {
        margin-left: 130px;
      }
    }

    .subsection-summary {
      font-weight:normal;
      display: block;
      color: $black;
    }

    a {
      text-decoration:none;
      color: $link-colour;
      cursor: pointer;
    }
  }

  /* Overwrite for h2s that occur in govspeak from hmrc manuals
     which shouldn't be collapsible. This styling is the fallback
     for when the js hasn't kicked in to style properly.
  */
  .collapsible-subsections .js-subsection-body .js-ignore-h2s h2 {
    border-top: none;
    margin: 0;
  }

  .subsection-collection {
    margin-top: $gutter-half;
    @include media(tablet){
      margin-top: $gutter;
    }

    .title {
      margin-bottom:$gutter-half;
      @include media(tablet) {
        margin-bottom:$gutter;
      }
      @include bold-24;
    }

    .title-controls-wrap {
      @extend %contain-floats;

      .title {
        @include media(tablet) {
          float:left;
          width: $three-quarters;
        }
      }

      .js-collection-controls {
        display:block;
        margin-left: -5px;
        margin-bottom:$gutter-half;

        @include media(tablet) {
          margin: 0 0 $gutter -5px;
          float:right;
          display:inline-block;
        }

        a {
          @include core-16;
          padding: 0  5px 0 5px;
          display:inline-block;

          &.disabled {
            color:$secondary-text-colour;
            text-decoration:none;
            cursor:default;
          }
        }
      }
    }
  }

  .manual-subsection {
    border-top: 1px solid $border-colour;
    padding-bottom: $gutter;

    @include media(tablet) {
      padding-bottom: $gutter*2;
    }

    .js-subsection-title {
      cursor: pointer;
      margin: 0;
      color:$link-colour;
      border:none;
      @include ie-lte(7){
        zoom:1;
      }

      .js-toggle {
        height: 25px;
        width: 25px;
        display:block;
        background: image-url("arrows_sprite.png") no-repeat;
        position:absolute;
        right: 0;
        top:$gutter-one-third;

        @include device-pixel-ratio() {
          background-image: image-url("arrows_sprite-2x.png");
          background-size: 32px 50px;
        }
      }
    }

    .js-subsection-body {
      margin-top:$gutter-half;
      @include media(tablet) {
        width:$two-thirds;
        margin-top:$gutter;
      }
    }

    .js-enabled &.closed {
      padding:0;

      .js-toggle {
        background: image-url("arrows_sprite.png") no-repeat 0 -32px;

        @include device-pixel-ratio() {
          background-image: image-url("arrows_sprite-2x.png");
          background-size: 32px 50px;
        }
      }

      .js-subsection-body {
        position:absolute;
        left:-9999px;
        width:100px;
      }
    }
  }
}
